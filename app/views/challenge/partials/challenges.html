<div class="container">
  <div class="row">
    <div class="span2">
      <!--Nav/Sidebar content-->
      <!-- <ng-include src="'views/partials/_drawer.html'"></ng-include> -->
      <accordion>
        <accordion-group class='drawer inverse' is-open="drawer.isDrawerOpen">
          <accordion-heading>
            <i class='fa fa-bars fa-lg'></i><i class="fa fa-plane pull-right"></i>
          </accordion-heading>
          <div class='item'><input ng-model="drawer.query" placeholder="Search"></div>
          <div class='item'>
            <button type="button" ng-click="shuffleDeck()"  class="btn btn-xs btn-default">Shuffle</button>
          </div>

          <accordion close-others="true">
            <accordion-group class='drawer-group inverse {{group.name}}'
            ng-repeat="group in drawer.json.data" 
            is-open="group.isOpen" >
              <accordion-heading>
                <span ng-bind-html="group.label" ng-click="drawer.forceGroupOpen(group)"></span>
                <span ng-bind="group.count" class="badge badge-default"></span>
              </accordion-heading>
              <div ng-repeat="options in group.items" 
              class="item"
              ng-class="{active: options.name==drawer.state.item}"
              ng-click="drawerItemClick(group.name, options)">
                <span ng-bind-html="options.label"></span>
                <span ng-if="group.name=='findhappi' && options.name!=='create'" class="badge badge-default">{{drawer.state.counts[options.countKey]}}</span>
              </div>
            </accordion-group>
          </accordion>
        </accordion-group> 
      </accordion>
      <!--/ Nav/Sidebar content-->
    </div>
    <div class="span10">
      <div class="notify">
        <alert ng-repeat="alert in notify.alert()" type="alert.type" close="notify.close(alert.key)">{{alert.msg}}</alert>
      </div>
      <!--Body content-->


      <div ng-model="card" ng-show='!card'
      class="challenge card empty-card summary list-unstyled text-center">
        <div class="header">
          <figure class="icon">
            <i class="icon fa fa-meh-o fa-3x"></i>
            <figcaption class="category">Move Along</figcaption>
          </figure>  
        </div>  
        <div class="body">
          <h2 class="title">There's nothing to see here...</h2>
        </div>
        <div class="footer">
          <div class='btn-group'>
            <button type="button" class="btn btn-primary" 
            ng-click="drawerShowAll()">Show All Cards</button>
          </div>
        </div>
      </div>

      <div ng-model="card" ng-show='!!card' 
      class="challenge card summary list-unstyled text-center">
        <div class="header">
          <figure class="icon">
            <i class="icon {{card.icon}} fa-3x"></i>
            <figcaption class="category">{{card.category.join(":")}}</figcaption>
          </figure>  
        </div>  
        <div class="body">
          <h4 class="heading">Find a Happi moment</h4>
          <h2 class="title">{{card.title}}</h2>
          <p class="description text-left">{{card.description}}</p> 
          <div class="meta well">
            <div class="header inverse">Challenge</div>
            <dl class="challenge-stats stats-wrap force-dl-horizontal">
              <div><b>{{card.humanize.completions}} completed</b></div>
              <dt>Accept</dt><dd>{{card.humanize.acceptPct | number:1}}%</dd>
              <dt>Pass</dt><dd>{{card.humanize.passPct | number:1}}%</dd>
              <dt>Avg Time</dt><dd>{{card.humanize.avgDuration}}</dd>
              <rating value="card.humanize.avgRating" readonly='true' state-on="'fa fa-star'" state-off="'fa fa-star-o'"></rating>
              <span class="label label-default" title="average rating for this challenge">{{card.humanize.avgRating}}</span>
            </dl>
          </div>
        </div>
        <div class="footer">
          <div class='btn-group status-new status-pass status-all'
          ng-show="['new','pass'].indexOf(card.status)>=0">
            <button type="button" class="btn btn-primary" ng-click="challenge_new()">Accept</button>
            <button type="button" class="btn btn-default" ng-click="challenge_later()">Later</button>
            <button type="button" ng-click="nextCard()"  class="btn btn-default">Pass</button>
          </div>
          <div class="btn-group status-active"
          ng-show="['active'].indexOf(card.status)>=0">
            <button type="button" class="btn btn-default" ng-click="challenge_done()">Done</button>
            <button type="button" class="btn btn-primary" ng-click="challenge_getPhoto()"><i class="fa fa-camera"></i> Camera Roll</button>
            <button type="button" class="btn btn-default" ng-click="challenge_pass()">Pass</button>
          </div> 
          <div class="btn-group status-complete"
          ng-show="['complete'].indexOf(card.status)>=0">
            <button type="button" class="btn btn-primary" ng-click="challenge_open()">Open</button>
            <button type="button" class="btn btn-default" title="repeat this challenge" ng-click="challenge_new()"><i class="fa fa-copy"></i> Repeat</button>
            <button type="button" class="btn btn-default" ng-click="nextCard()">Next</button>
          </div>
          <div class="btn-group status-working"
          ng-show="['working'].indexOf(card.status)>=0">
            <button type="button" class="btn btn-primary" ng-click="challenge_open()">Open</button>
            <button type="button" class="btn btn-default" ng-click="nextCard()">Next</button>
          </div>
          <div class="btn-group status-sleep"
          ng-show="['sleep'].indexOf(card.status)>=0">
            <button type="button" class="btn btn-primary">Wake</button>
          </div>
        </div>
      </div>

      <div class="gallery clearfix">
        <div ng-repeat="photo in challengePhotos"
          id="{{photo.id}}" 
          class="thumb fade in {{photo.orientationLabel}}" 
          style="{{top}}{{position}}">
              <div class="crop-wrap">
                <div class="crop">
                  <img class=""  
                    data-w0="{{photo.origW}}"
                    data-h0="{{photo.origH}}"
                    data-root-src="{{photo.rootSrc}}"
                    ng-src="{{photo.src}}" 
                  >
              </div>
            </div>
          <div class="meta">
            <div ng-show="!!photo.caption" class="title truncate">
              {{photo.caption}}
            </div>
            <div class='bottom-row'> 
              <span class="inline-icons left">
                <i ng-show="!!photo.shotCount" class='btn-icon fa fa-reorder show-hidden-shot' title='click to hide duplicate shots'></i>
                <rating value="photo.rating" state-on="'fa fa-star'" state-off="'fa fa-star-o'"></rating>
              </span>
              <span class="inline-icons right">
                <i class='btn-icon fa {{photo.favorite && 'fa-heart' || 'fa-heart-o'}} ' title='favorite'> {{photo.favorite}}</i>
                <i class='btn-icon fa fa-info-circle'  title='show info'></i>
                <i class='btn-icon zoom-in fa fa-arrow-right' title='show full screen (planned)'></i>
              </span>
            </div>
          </div>
        </div>  <!-- /div.thumb -->
      </div>

    </div>
  </div>
</div>