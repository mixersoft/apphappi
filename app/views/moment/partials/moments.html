<div class="container">
  <div class="row">
    <div class="span2">
      <!--Sidebar content-->

      Search: <input ng-model="query">
      Sort by:
      <select ng-model="orderProp">
        <option value="modified">Most Recent</option>
        <option value="name">Name</option>
        <option value="category">Category</option>
        <option value="count">Count</option>
      </select>
      <button type="button" ng-click="shuffleDeck()"  class="btn btn-default">shuffle</button>
    </div>
    <div class="span10">
      <!--Body content-->
      <div ng-model="card" 
            class="moment card summary list-unstyled text-center">
        <ul class='header list-inline list-unstyled'>   
          <li>
            <figure class="icon">
              <i class="icon {{card.challenge.icon}} fa-3x"></i>
              <figcaption class="category">{{card.challenge.category.join(":")}}</figcaption>
            </figure>
          </li>
          <li ng-click="toggleDetail()" class="title">
            {{card.challenge.title}} 
            <i class="toggle fa {{card.showDetail && 'fa-chevron-down' || 'fa-chevron-right'}}"></i>
          </li>
        </ul>  
        <div ng-show="card.showDetail" class="body clearfix">
          <div class="meta well pull-left">
            <div class="header inverse">Moment</div>
            <dl class="moment-stats stats-wrap force-dl-horizontal">
              <dt>Completed</dt><dd title="completed on {{card.humanize.completed}}">{{card.humanize.completedAgo}}</dd>
              <dt>Duration</dt><dd>{{card.humanize.completedIn}}</dd>
              <dt>Photos</dt><dd>{{card.stats.count}}</dd>
              <dt>Viewed</dt><dd ng-pluralize count="card.stats.viewed" when="{'one':'1 time','other':'{} times'}"></dd>
              <div class='btn-icon rating' title='rating: {{card.stats.rating}}'
                  ><i ng-repeat="i in [1,2,3,4,5]" class="fa {{i<=card.stats.rating && 'fa-star' || 'fa-star-o'}}"></i></div>
            </dl>
          </div>
          <div class="meta well pull-right">
            <div class="header inverse">Challenge</div>
            <dl class="challenge-stats stats-wrap force-dl-horizontal">
              <div><b>{{card.challenge.humanize.completions}} completed</b></div>
              <dt>Accept</dt><dd>{{card.challenge.humanize.acceptPct | number:1}}%</dd>
              <dt>Pass</dt><dd>{{card.challenge.humanize.passPct | number:1}}%</dd>
              <dt>Avg Time</dt><dd>{{card.challenge.humanize.avgDuration}}</dd>
              <div class='btn-icon rating' title='Avg Rating for all completed moments: {{card.challenge.humanize.avgRating}}'
                  ><i ng-repeat="i in [1,2,3,4,5]" class="fa {{i<=card.stats.rating && 'fa-star' || 'fa-star-o'}}"></i></div>
            </dl>
          </div>
        </div>
        <div ng-show="card.showDetail"  class="footer clearfix">
          <div class="btn-group">
            <button type="button" class="btn btn-default"><i class="fa fa-pencil-square"></i></button>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-default"><i class="fa fa-trash-o"></i></button>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-default"><i class="fa fa-thumbs-down"></i></button>
            <button type="button" class="btn btn-default"><i class="fa fa-thumbs-up"></i></button>
          </div>
        </div>
      </div>
      <div class="gallery" ng-repeat="photo in card.photos">
        <div id="{{photo.id}}" class="thumb fade xxxfade-out {{photo.orientationLabel}}" style="{{top}}{{position}}">
              <div class="crop-wrap">
                <div class="crop">
                  <img class=""  
                    data-w0="{{photo.origW}}"
                    data-h0="{{photo.origH}}"
                    data-root-src="{{photo.rootSrc}}"
                    ng-src="{{photo.src}}" 
                  >
              </div>
            </div>
          <div class="meta">
            <div ng-show="!!photo.caption" class="title truncate">
              {{photo.caption}}
            </div>
            <div class='bottom-row'> 
              <span class="inline-icons left">
                <i ng-show="!!photo.shotCount" class='btn-icon fa fa-reorder show-hidden-shot' title='click to hide duplicate shots'></i>
                <span class='btn-icon rating' title='rating: {{photos.rating}}'
                  ><i ng-repeat="i in [1,2,3,4,5]" class="fa {{i<=photo.rating && 'fa-star' || 'fa-star-o'}}"></i></span>
              </span>
              <span class="inline-icons right">
                <i class='btn-icon fa {{photo.favorite && 'fa-heart' || 'fa-heart-o'}} ' title='favorite'> {{photo.favorite}}</i>
                <i class='btn-icon fa fa-info-circle'  title='show info'></i>
                <i class='btn-icon zoom-in fa fa-arrow-right' title='show full screen (planned)'></i>
              </span>
            </div>
          </div>
        </div>  <!-- /div.thumb -->
      </div>
    </div>
  </div>
</div>